# DDS Texture Caching

The texture caching was an old method used by the old 
Metin2 auto-patcher to reduce download time of big texture files.

The auto-patcher would download RDCH files and after being 
downloaded, it would read the file and generate
a new [EterPack](../Pack/eter.md) file
named with the RCDH filename followed by `_texcache`, to signalize that
this texture cache was generated by the patcher.


## Usage
Its introduction date is unknown however its estimated that 
the format was used in the Korean auto-patcher around 2013,
and then dropped later at an unknown date
(this is a rough estimation that is not precisely confirmed)


## RDCH Format
### Header

| Bytes | Description                 |
|-------|-----------------------------|
| 4     | Texture count               |


### DDS texture

| Bytes | Description  |
|-------|--------------|
| 4     | Texture size |
| 4     | Mipmap count |
| ?     | File Name    |
| ?     | Texture data |


[//]: # (TODO: Find a RDCH file to parse with kaitai to confirm this structure) 
Then, each texture cached is contained inside, at least 8 bytes per texture.

First 4 bytes: Length of the cached texture (The name is a file contained inside the corrisponding EterPack)

Next 4 bytes: Mipmap count

Then it follows the name of the file without a null terminator.

Last, the DDS texture for each mipmap compressed.
